{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\magang-praktek\\\\baru-tes\\\\project-manajuser-master\\\\project-dashboard\\\\src\\\\models\\\\edit.user.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Config from '../config/config';\n\nclass form extends Component {\n  /**\r\n     * \r\n     * @description konstruktor untuk kelas form \r\n     */\n  constructor(props) {\n    super(props);\n    this.state = {\n      dataUser: {},\n      fields: {},\n      errors: {}\n    };\n  } // componentDidMount(){\n  //   // parametro de id del usuario\n  //   let userId = this.props.id;\n  //   // http://localhost:3000/employee/get/4\n  //   const url = Config.baseUrl+\"/users\"+userId\n  //   axios.get(url)\n  //   .then(res=>{\n  //     if (res.data.success) {\n  //       const data = res.data.data[0]\n  //       this.setState({\n  //         dataUser:data,\n  //         campName: data.name,\n  //         campEmail:data.email,\n  //         campPhone:data.phone,\n  //         campPassword:data.password,\n  //         stringRole:data.role.role,\n  //         selectRole:data.roleId\n  //       })\n  //     }\n  //     else {\n  //       alert(\"Error web service\")\n  //     }\n  //   })\n  //   .catch(error=>{\n  //     alert(\"Error server \"+error)\n  //   })\n  // }  \n\n  /**\r\n   * @description method untuk melakukan validasi setiap data yang diinput pada form create user seperti data tidak boleh kosong, dan syarat-syarat lainnya\r\n   * @param {string} campName variabel menampung nama\r\n   * @param {string} campEmail variabel menampung email\r\n   * @param {string} campPassword variabel menampung password\r\n   * @param {Integer} campPhone variabel menampung no handphone\r\n   */\n\n\n  handleValidation() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true; //Name\n\n    if (!fields[\"campName\"]) {\n      formIsValid = false;\n      errors[\"campName\"] = \"Cannot be empty\";\n    }\n\n    if (typeof fields[\"campName\"] !== \"undefined\") {\n      if (!fields[\"campName\"].match(/^[a-zA-Z\\s]+$/)) {\n        formIsValid = false;\n        errors[\"campName\"] = \"Only letters\";\n      }\n    } //Email\n\n\n    if (!fields[\"campEmail\"]) {\n      formIsValid = false;\n      errors[\"campEmail\"] = \"Cannot be empty\";\n    }\n\n    if (typeof fields[\"campEmail\"] !== \"undefined\") {\n      let lastAtPos = fields[\"campEmail\"].lastIndexOf('@');\n      let lastDotPos = fields[\"campEmail\"].lastIndexOf('.');\n\n      if (!(lastAtPos < lastDotPos && lastAtPos > 0 && fields[\"campEmail\"].indexOf('@@') == -1 && lastDotPos > 2 && fields[\"campEmail\"].length - lastDotPos > 2)) {\n        formIsValid = false;\n        errors[\"campEmail\"] = \"Email is not valid\";\n      }\n    } //Password\n\n\n    if (!fields[\"campPassword\"]) {\n      formIsValid = false;\n      errors[\"campPassword\"] = \"Cannot be empty\";\n    }\n\n    if (typeof fields[\"campPassword\"] !== \"undefined\") {\n      if (!fields[\"campPassword\"].match(/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\\s).{8,15}$/)) {\n        formIsValid = false;\n        errors[\"campPassword\"] = \"Password must contain at least one lowercase letter, one uppercase letter, one numeric digit, and one special character\";\n      }\n    } //Phone\n\n\n    if (!fields[\"campPhone\"]) {\n      formIsValid = false;\n      errors[\"campPhone\"] = \"Cannot be empty\";\n    }\n\n    if (typeof fields[\"campPhone\"] !== \"undefined\") {\n      if (!fields[\"campPhone\"].match(/^(0813|0814|0815|0816|0855|0858|0856|0857|0827|0828|0811|0812|0821|0822|0851|0852|0853|0823|0817|0818|0819|0877|0878|0859|0831|0832|0833|0838|0881|0882|0883|0884|0885|0886|0887|0888|0889|0895|0896|0897|0898|0899)[0-9]{6,8}$/gm)) {\n        formIsValid = false;\n        errors[\"campPhone\"] = \"Phone number is not valid\";\n      }\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n  /**\r\n   * @description method untuk menyimpan data yang telah valid ke database\r\n   * @param {*} e menampung data yang telah valid\r\n   */\n\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    if (this.handleValidation()) {\n      const datapost = {\n        name: this.state.fields[\"campName\"],\n        email: this.state.fields[\"campEmail\"],\n        phone: this.state.fields[\"campPhone\"],\n        password: this.state.fields[\"campPassword\"],\n        role: this.state.selectRole\n      };\n      const url = Config.baseUrl + \"/users\";\n      axios.post(url, datapost); // alert(\"Form submitted\");\n\n      window.location.href = \"\";\n    } else {\n      // alert(\"Form has errors.\")\n      console.log(this.state);\n    }\n  }\n\n  handleChange(field, e) {\n    let fields = this.state.fields;\n    fields[field] = e.target.value;\n    this.setState({\n      fields\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal fade\",\n      id: \"modal-default2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-dialog\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, \"\\xD7\")), /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"modal-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, \"Edit User\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      name: \"contactform\",\n      className: \"contactform\",\n      onSubmit: this.handleSubmit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"exampleInputName1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }, \"Nama\"), /*#__PURE__*/React.createElement(\"input\", {\n      ref: \"name\",\n      type: \"text\",\n      className: \"form-control\",\n      size: \"30\",\n      placeholder: \"Name\",\n      onChange: this.handleChange.bind(this, \"campName\"),\n      value: this.state.fields[\"campName\"],\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"help-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, this.state.errors[\"campName\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"exampleInputHandphone1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 19\n      }\n    }, \"No. Handphone\"), /*#__PURE__*/React.createElement(\"input\", {\n      refs: \"phone\",\n      type: \"telp\",\n      className: \"form-control\",\n      size: \"12\",\n      placeholder: \"Phone\",\n      onChange: this.handleChange.bind(this, \"campPhone\"),\n      value: this.state.fields[\"campPhone\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"help-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, this.state.errors[\"campPhone\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"exampleInputEmail1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      refs: \"email\",\n      type: \"email\",\n      className: \"form-control\",\n      size: \"30\",\n      placeholder: \"Email\",\n      onChange: this.handleChange.bind(this, \"campEmail\"),\n      value: this.state.fields[\"campEmail\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"help-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 19\n      }\n    }, this.state.errors[\"campEmail\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"exampleInputPassword1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 19\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      refs: \"password\",\n      type: \"password\",\n      className: \"form-control\",\n      size: \"15\",\n      placeholder: \"Password\",\n      onChange: this.handleChange.bind(this, \"campPassword\"),\n      value: this.state.fields[\"campPassword\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"help-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 19\n      }\n    }, this.state.errors[\"campPassword\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"inputState\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    }, \"User Role\"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"inputState\",\n      className: \"form-control select2\",\n      onChange: value => this.setState({\n        selectRole: value.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: this.state.dataUser.roleId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 29\n      }\n    }, this.state.stringRole), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }, \"Role 1\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 29\n      }\n    }, \"Role 2\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 29\n      }\n    }, \"Role 3\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-default\",\n      \"data-dismiss\": \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }, \"Batal\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      id: \"submit\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 25\n      }\n    }, \"Update\")))))))));\n  }\n\n}\n\nexport default form;","map":{"version":3,"sources":["C:/Users/HP/magang-praktek/baru-tes/project-manajuser-master/project-dashboard/src/models/edit.user.js"],"names":["React","Component","axios","Config","form","constructor","props","state","dataUser","fields","errors","handleValidation","formIsValid","match","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","setState","handleSubmit","e","preventDefault","datapost","name","email","phone","password","role","selectRole","url","baseUrl","post","window","location","href","console","log","handleChange","field","target","value","render","bind","roleId","stringRole"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;;AAGA,MAAMC,IAAN,SAAmBH,SAAnB,CAA4B;AAC5B;;;;AAIAI,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACbC,MAAAA,QAAQ,EAAC,EADI;AAEXC,MAAAA,MAAM,EAAE,EAFG;AAGXC,MAAAA,MAAM,EAAE;AAHG,KAAb;AAKD,GAbyB,CAe1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA;;;;;;;;;AAOAC,EAAAA,gBAAgB,GAAE;AAChB,QAAIF,MAAM,GAAG,KAAKF,KAAL,CAAWE,MAAxB;AACA,QAAIC,MAAM,GAAG,EAAb;AACA,QAAIE,WAAW,GAAG,IAAlB,CAHgB,CAKhB;;AACA,QAAG,CAACH,MAAM,CAAC,UAAD,CAAV,EAAuB;AACrBG,MAAAA,WAAW,GAAG,KAAd;AACAF,MAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,iBAArB;AACD;;AAED,QAAG,OAAOD,MAAM,CAAC,UAAD,CAAb,KAA8B,WAAjC,EAA6C;AAC3C,UAAG,CAACA,MAAM,CAAC,UAAD,CAAN,CAAmBI,KAAnB,CAAyB,eAAzB,CAAJ,EAA8C;AAC5CD,QAAAA,WAAW,GAAG,KAAd;AACAF,QAAAA,MAAM,CAAC,UAAD,CAAN,GAAqB,cAArB;AACD;AACF,KAhBe,CAkBhB;;;AACA,QAAG,CAACD,MAAM,CAAC,WAAD,CAAV,EAAwB;AACtBG,MAAAA,WAAW,GAAG,KAAd;AACAF,MAAAA,MAAM,CAAC,WAAD,CAAN,GAAsB,iBAAtB;AACD;;AAED,QAAG,OAAOD,MAAM,CAAC,WAAD,CAAb,KAA+B,WAAlC,EAA8C;AAC5C,UAAIK,SAAS,GAAGL,MAAM,CAAC,WAAD,CAAN,CAAoBM,WAApB,CAAgC,GAAhC,CAAhB;AACA,UAAIC,UAAU,GAAGP,MAAM,CAAC,WAAD,CAAN,CAAoBM,WAApB,CAAgC,GAAhC,CAAjB;;AAEA,UAAI,EAAED,SAAS,GAAGE,UAAZ,IAA0BF,SAAS,GAAG,CAAtC,IAA2CL,MAAM,CAAC,WAAD,CAAN,CAAoBQ,OAApB,CAA4B,IAA5B,KAAqC,CAAC,CAAjF,IAAsFD,UAAU,GAAG,CAAnG,IAAyGP,MAAM,CAAC,WAAD,CAAN,CAAoBS,MAApB,GAA6BF,UAA9B,GAA4C,CAAtJ,CAAJ,EAA8J;AAC5JJ,QAAAA,WAAW,GAAG,KAAd;AACAF,QAAAA,MAAM,CAAC,WAAD,CAAN,GAAsB,oBAAtB;AACD;AACF,KAhCe,CAkChB;;;AACA,QAAG,CAACD,MAAM,CAAC,cAAD,CAAV,EAA2B;AACzBG,MAAAA,WAAW,GAAG,KAAd;AACAF,MAAAA,MAAM,CAAC,cAAD,CAAN,GAAyB,iBAAzB;AACD;;AAED,QAAG,OAAOD,MAAM,CAAC,cAAD,CAAb,KAAkC,WAArC,EAAiD;AAC/C,UAAG,CAACA,MAAM,CAAC,cAAD,CAAN,CAAuBI,KAAvB,CAA6B,mEAA7B,CAAJ,EAAsG;AACpGD,QAAAA,WAAW,GAAG,KAAd;AACAF,QAAAA,MAAM,CAAC,cAAD,CAAN,GAAyB,yHAAzB;AACD;AACF,KA7Ce,CA+ChB;;;AACA,QAAG,CAACD,MAAM,CAAC,WAAD,CAAV,EAAwB;AACtBG,MAAAA,WAAW,GAAG,KAAd;AACAF,MAAAA,MAAM,CAAC,WAAD,CAAN,GAAsB,iBAAtB;AACD;;AAED,QAAG,OAAOD,MAAM,CAAC,WAAD,CAAb,KAA+B,WAAlC,EAA8C;AAC5C,UAAG,CAACA,MAAM,CAAC,WAAD,CAAN,CAAoBI,KAApB,CAA0B,mOAA1B,CAAJ,EAAmQ;AACjQD,QAAAA,WAAW,GAAG,KAAd;AACAF,QAAAA,MAAM,CAAC,WAAD,CAAN,GAAsB,2BAAtB;AACD;AACF;;AAED,SAAKS,QAAL,CAAc;AAACT,MAAAA,MAAM,EAAEA;AAAT,KAAd;AACA,WAAOE,WAAP;AACD;AAED;;;;;;AAIAQ,EAAAA,YAAY,CAACC,CAAD,EAAG;AACbA,IAAAA,CAAC,CAACC,cAAF;;AACA,QAAG,KAAKX,gBAAL,EAAH,EAA2B;AACzB,YAAMY,QAAQ,GAAG;AACfC,QAAAA,IAAI,EAAG,KAAKjB,KAAL,CAAWE,MAAX,CAAkB,UAAlB,CADQ;AAEfgB,QAAAA,KAAK,EAAG,KAAKlB,KAAL,CAAWE,MAAX,CAAkB,WAAlB,CAFO;AAGfiB,QAAAA,KAAK,EAAG,KAAKnB,KAAL,CAAWE,MAAX,CAAkB,WAAlB,CAHO;AAIfkB,QAAAA,QAAQ,EAAG,KAAKpB,KAAL,CAAWE,MAAX,CAAkB,cAAlB,CAJI;AAKfmB,QAAAA,IAAI,EAAI,KAAKrB,KAAL,CAAWsB;AALJ,OAAjB;AAOA,YAAMC,GAAG,GAAG3B,MAAM,CAAC4B,OAAP,GAAe,QAA3B;AACA7B,MAAAA,KAAK,CAAC8B,IAAN,CAAWF,GAAX,EAAeP,QAAf,EATyB,CAUzB;;AACAU,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,EAArB;AACD,KAZD,MAYK;AACH;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAjB;AACD;AAGF;;AAED+B,EAAAA,YAAY,CAACC,KAAD,EAAQlB,CAAR,EAAU;AACpB,QAAIZ,MAAM,GAAG,KAAKF,KAAL,CAAWE,MAAxB;AACAA,IAAAA,MAAM,CAAC8B,KAAD,CAAN,GAAgBlB,CAAC,CAACmB,MAAF,CAASC,KAAzB;AACA,SAAKtB,QAAL,CAAc;AAACV,MAAAA;AAAD,KAAd;AACD;;AAEDiC,EAAAA,MAAM,GAAE;AACN,wBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,EAAE,EAAC,gBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,OAAhC;AAAwC,sBAAa,OAArD;AAA6D,oBAAW,OAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,qBAAY,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADF,eAGM;AAAI,MAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAHN,CADA,eAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACF;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAM,MAAA,IAAI,EAAC,aAAX;AAAyB,MAAA,SAAS,EAAC,aAAnC;AAAiD,MAAA,QAAQ,EAAG,KAAKtB,YAAL,CAAkBuB,IAAlB,CAAuB,IAAvB,CAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAO,MAAA,OAAO,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,eAEE;AAAO,MAAA,GAAG,EAAC,MAAX;AAAkB,MAAA,IAAI,EAAC,MAAvB;AAA8B,MAAA,SAAS,EAAC,cAAxC;AAAuD,MAAA,IAAI,EAAC,IAA5D;AAAiE,MAAA,WAAW,EAAC,MAA7E;AAAoF,MAAA,QAAQ,EAAE,KAAKL,YAAL,CAAkBK,IAAlB,CAAuB,IAAvB,EAA6B,UAA7B,CAA9F;AAAwI,MAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWE,MAAX,CAAkB,UAAlB,CAA/I;AAA8K,MAAA,QAAQ,MAAtL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAM,MAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8B,KAAKF,KAAL,CAAWG,MAAX,CAAkB,UAAlB,CAA9B,CAHF,CADJ,eAMI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,OAAO,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,MAAzB;AAAgC,MAAA,SAAS,EAAC,cAA1C;AAAyD,MAAA,IAAI,EAAC,IAA9D;AAAmE,MAAA,WAAW,EAAC,OAA/E;AAAuF,MAAA,QAAQ,EAAE,KAAK4B,YAAL,CAAkBK,IAAlB,CAAuB,IAAvB,EAA6B,WAA7B,CAAjG;AAA4I,MAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWE,MAAX,CAAkB,WAAlB,CAAnJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAM,MAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8B,KAAKF,KAAL,CAAWG,MAAX,CAAkB,WAAlB,CAA9B,CAHF,CANJ,eAWI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,OAAO,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,IAAI,EAAC,OAAzB;AAAiC,MAAA,SAAS,EAAC,cAA3C;AAA0D,MAAA,IAAI,EAAC,IAA/D;AAAoE,MAAA,WAAW,EAAC,OAAhF;AAAwF,MAAA,QAAQ,EAAE,KAAK4B,YAAL,CAAkBK,IAAlB,CAAuB,IAAvB,EAA6B,WAA7B,CAAlG;AAA6I,MAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWE,MAAX,CAAkB,WAAlB,CAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAM,MAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8B,KAAKF,KAAL,CAAWG,MAAX,CAAkB,WAAlB,CAA9B,CAHF,CAXJ,eAgBI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,OAAO,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,IAAI,EAAC,UAA5B;AAAuC,MAAA,SAAS,EAAC,cAAjD;AAAgE,MAAA,IAAI,EAAC,IAArE;AAA0E,MAAA,WAAW,EAAC,UAAtF;AAAiG,MAAA,QAAQ,EAAE,KAAK4B,YAAL,CAAkBK,IAAlB,CAAuB,IAAvB,EAA6B,cAA7B,CAA3G;AAAyJ,MAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWE,MAAX,CAAkB,cAAlB,CAAhK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAM,MAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8B,KAAKF,KAAL,CAAWG,MAAX,CAAkB,cAAlB,CAA9B,CAHF,CAhBJ,eAqBI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACQ;AAAO,MAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADR,eAEQ;AAAQ,MAAA,EAAE,EAAC,YAAX;AAAwB,MAAA,SAAS,EAAC,sBAAlC;AAAyD,MAAA,QAAQ,EAAG+B,KAAD,IAAU,KAAKtB,QAAL,CAAc;AAACU,QAAAA,UAAU,EAACY,KAAK,CAACD,MAAN,CAAaC;AAAzB,OAAd,CAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,KAAK,EAAE,KAAKlC,KAAL,CAAWC,QAAX,CAAoBoC,MAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4C,KAAKrC,KAAL,CAAWsC,UAAvD,CADJ,eAEI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAGI;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAII;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ,CAFR,CArBJ,CAFJ,eAoCE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACY;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,SAAS,EAAC,iBAAhC;AAAkD,sBAAa,OAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADZ,eAEY;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,EAAE,EAAC,QAAzB;AAAkC,MAAA,SAAS,EAAC,iBAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFZ,CADF,CApCF,CADA,CADE,CANA,CADF,CADF,CADF;AAkED;;AAtNyB;;AA0N5B,eAAezC,IAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport Config from '../config/config';\r\n\r\n\r\nclass form extends Component{\r\n/**\r\n   * \r\n   * @description konstruktor untuk kelas form \r\n   */\r\nconstructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n    dataUser:{},\r\n      fields: {},\r\n      errors: {}\r\n    }\r\n  }\r\n  \r\n  // componentDidMount(){\r\n  //   // parametro de id del usuario\r\n  //   let userId = this.props.id;\r\n  //   // http://localhost:3000/employee/get/4\r\n  //   const url = Config.baseUrl+\"/users\"+userId\r\n  //   axios.get(url)\r\n  //   .then(res=>{\r\n  //     if (res.data.success) {\r\n  //       const data = res.data.data[0]\r\n  //       this.setState({\r\n  //         dataUser:data,\r\n  //         campName: data.name,\r\n  //         campEmail:data.email,\r\n  //         campPhone:data.phone,\r\n  //         campPassword:data.password,\r\n  //         stringRole:data.role.role,\r\n  //         selectRole:data.roleId\r\n  //       })\r\n  //     }\r\n  //     else {\r\n  //       alert(\"Error web service\")\r\n  //     }\r\n  //   })\r\n  //   .catch(error=>{\r\n  //     alert(\"Error server \"+error)\r\n  //   })\r\n\r\n  // }  \r\n\r\n  /**\r\n   * @description method untuk melakukan validasi setiap data yang diinput pada form create user seperti data tidak boleh kosong, dan syarat-syarat lainnya\r\n   * @param {string} campName variabel menampung nama\r\n   * @param {string} campEmail variabel menampung email\r\n   * @param {string} campPassword variabel menampung password\r\n   * @param {Integer} campPhone variabel menampung no handphone\r\n   */\r\n  handleValidation(){\r\n    let fields = this.state.fields;\r\n    let errors = {};\r\n    let formIsValid = true;\r\n\r\n    //Name\r\n    if(!fields[\"campName\"]){\r\n      formIsValid = false;\r\n      errors[\"campName\"] = \"Cannot be empty\";\r\n    }\r\n\r\n    if(typeof fields[\"campName\"] !== \"undefined\"){\r\n      if(!fields[\"campName\"].match(/^[a-zA-Z\\s]+$/)){\r\n        formIsValid = false;\r\n        errors[\"campName\"] = \"Only letters\";\r\n      }      \t\r\n    }\r\n\r\n    //Email\r\n    if(!fields[\"campEmail\"]){\r\n      formIsValid = false;\r\n      errors[\"campEmail\"] = \"Cannot be empty\";\r\n    }\r\n\r\n    if(typeof fields[\"campEmail\"] !== \"undefined\"){\r\n      let lastAtPos = fields[\"campEmail\"].lastIndexOf('@');\r\n      let lastDotPos = fields[\"campEmail\"].lastIndexOf('.');\r\n\r\n      if (!(lastAtPos < lastDotPos && lastAtPos > 0 && fields[\"campEmail\"].indexOf('@@') == -1 && lastDotPos > 2 && (fields[\"campEmail\"].length - lastDotPos) > 2)) {\r\n        formIsValid = false;\r\n        errors[\"campEmail\"] = \"Email is not valid\";\r\n      }\r\n    }\r\n\r\n    //Password\r\n    if(!fields[\"campPassword\"]){\r\n      formIsValid = false;\r\n      errors[\"campPassword\"] = \"Cannot be empty\";\r\n    }\r\n\r\n    if(typeof fields[\"campPassword\"] !== \"undefined\"){\r\n      if(!fields[\"campPassword\"].match(/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\\s).{8,15}$/)){\r\n        formIsValid = false;\r\n        errors[\"campPassword\"] = \"Password must contain at least one lowercase letter, one uppercase letter, one numeric digit, and one special character\";\r\n      }      \t\r\n    }\r\n\r\n    //Phone\r\n    if(!fields[\"campPhone\"]){\r\n      formIsValid = false;\r\n      errors[\"campPhone\"] = \"Cannot be empty\";\r\n    }\r\n\r\n    if(typeof fields[\"campPhone\"] !== \"undefined\"){\r\n      if(!fields[\"campPhone\"].match(/^(0813|0814|0815|0816|0855|0858|0856|0857|0827|0828|0811|0812|0821|0822|0851|0852|0853|0823|0817|0818|0819|0877|0878|0859|0831|0832|0833|0838|0881|0882|0883|0884|0885|0886|0887|0888|0889|0895|0896|0897|0898|0899)[0-9]{6,8}$/gm)){\r\n        formIsValid = false;\r\n        errors[\"campPhone\"] = \"Phone number is not valid\";\r\n      }      \t\r\n    }\r\n\r\n    this.setState({errors: errors});\r\n    return formIsValid;\r\n  }\r\n\r\n  /**\r\n   * @description method untuk menyimpan data yang telah valid ke database\r\n   * @param {*} e menampung data yang telah valid\r\n   */\r\n  handleSubmit(e){\r\n    e.preventDefault();\r\n    if(this.handleValidation()){\r\n      const datapost = {\r\n        name : this.state.fields[\"campName\"],\r\n        email : this.state.fields[\"campEmail\"],\r\n        phone : this.state.fields[\"campPhone\"],\r\n        password : this.state.fields[\"campPassword\"],\r\n        role  : this.state.selectRole\r\n      }\r\n      const url = Config.baseUrl+\"/users\"\r\n      axios.post(url,datapost)\r\n      // alert(\"Form submitted\");\r\n      window.location.href=\"\";\r\n    }else{\r\n      // alert(\"Form has errors.\")\r\n      console.log(this.state)\r\n    } \r\n   \r\n\r\n  }\r\n\r\n  handleChange(field, e){    \t\t\r\n    let fields = this.state.fields;\r\n    fields[field] = e.target.value;        \r\n    this.setState({fields});\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"modal fade\" id=\"modal-default2\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">×</span></button>\r\n                <h4 className=\"modal-title\">Edit User</h4>\r\n          </div>\r\n          <div>\r\n        <div className=\"box-body\">      \t\r\n        <form name=\"contactform\" className=\"contactform\" onSubmit= {this.handleSubmit.bind(this)}>\r\n          \r\n            <fieldset>\r\n                <div className=\"form-group\">\r\n                <label htmlFor=\"exampleInputName1\">Nama</label>\r\n                  <input ref=\"name\" type=\"text\" className=\"form-control\" size=\"30\" placeholder=\"Name\" onChange={this.handleChange.bind(this, \"campName\")} value={this.state.fields[\"campName\"]} required/>\r\n                  <span className=\"help-block\">{this.state.errors[\"campName\"]}</span>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"exampleInputHandphone1\">No. Handphone</label>\r\n                  <input refs=\"phone\" type=\"telp\" className=\"form-control\" size=\"12\" placeholder=\"Phone\" onChange={this.handleChange.bind(this, \"campPhone\")} value={this.state.fields[\"campPhone\"]}/>\r\n                  <span className=\"help-block\">{this.state.errors[\"campPhone\"]}</span>\r\n                </div> \r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"exampleInputEmail1\">Email</label>\r\n                  <input refs=\"email\" type=\"email\" className=\"form-control\" size=\"30\" placeholder=\"Email\" onChange={this.handleChange.bind(this, \"campEmail\")} value={this.state.fields[\"campEmail\"]}/>\r\n                  <span className=\"help-block\">{this.state.errors[\"campEmail\"]}</span>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"exampleInputPassword1\">Password</label>\r\n                  <input refs=\"password\" type=\"password\" className=\"form-control\" size=\"15\" placeholder=\"Password\" onChange={this.handleChange.bind(this, \"campPassword\")} value={this.state.fields[\"campPassword\"]}/>\r\n                  <span className=\"help-block\">{this.state.errors[\"campPassword\"]}</span>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                        <label htmlFor=\"inputState\">User Role</label>\r\n                        <select id=\"inputState\" className=\"form-control select2\" onChange={(value)=> this.setState({selectRole:value.target.value})}>\r\n                            <option value={this.state.dataUser.roleId}>{this.state.stringRole}</option>\r\n                            <option value=\"1\">Role 1</option>\r\n                            <option value=\"2\">Role 2</option>\r\n                            <option value=\"3\">Role 3</option>\r\n                        </select>\r\n                    </div>\r\n                \r\n            </fieldset>\r\n          \r\n          \r\n          <div className=\"col-md-12\">\r\n            <div className=\"modal-footer\">\r\n                        <button type=\"button\" className=\"btn btn-default\" data-dismiss=\"modal\">Batal</button>\r\n                        <button type=\"submit\" id=\"submit\" className=\"btn btn-primary\" >Update</button>\r\n                    </div>\r\n          </div>\r\n\r\n        </form>\r\n        </div>  \r\n        </div>\r\n        {/* /.modal-content */}\r\n        </div>\r\n        {/* /.modal-dialog */}\r\n        </div>\r\n        {/* /.box-header */}\r\n      </div>\r\n            \r\n    )\r\n    \r\n  }\r\n  \r\n}\r\n\r\nexport default form;"]},"metadata":{},"sourceType":"module"}